<div
  [ngClass]="
    minimized() ? 'h-[50px]' : 'flex flex-col h-screen w-screen bg-white md:h-[520px] md:w-[350px] '
  "
>
  <div class="flex items-center justify-between h-[50px] bg-red-700 p-2">
    <div class="flex items-center gap-2">
      @if(minimized()) {
      <span class="pi pi-chevron-up text-white cursor-pointer" (click)="minimize()"></span>
      } @else {
      <span class="pi pi-chevron-down text-white cursor-pointer" (click)="minimize()"></span>
      }
      <div class="flex items-center gap-2">
        <p-avatar image="./avatar.png" class="mr-2" size="large" shape="circle" />
        <p-overlaybadge severity="success"> </p-overlaybadge>
        <div class="text-white">{{ bootName }}</div>
      </div>
    </div>
    @if(!minimized()) {
    <span class="pi pi-bars text-white cursor-pointer" (click)="showOptions()"></span>
    }
  </div>

  <div
    [ngClass]="
      minimized()
        ? 'hidden'
        : 'flex flex-1 flex-col gap-2 md:h-[300px] overflow-auto p-2 border border-red-50'
    "
  >
    @for(message of messages; track message.text) {
    <div
      class="bg-red-100 rounded-bl-3xl rounded-tr-3xl p-5 max-w-[250px]"
      [class.user-message]="message.from === 'user'"
    >
      {{ message.text }}
    </div>
    }
  </div>

  <div
    [ngClass]="
      minimized()
        ? 'hidden'
        : 'md:h-[115px] overflow-hidden flex flex-col gap-2 p-2 border border-red-100'
    "
  >
    <span>Estas son algunas de las cosas que me puedes preguntar:</span>
    <div class="flex items-center gap-2">
      @if(showAngelLeft()) {
      <div class="chat-suggestions__scroll-icon">
        <span class="pi pi-angle-left text-red-700 cursor-pointer" (click)="moveToLeft()"></span>
      </div>
      }

      <div
        class="flex gap-2 md:w-[320px] overflow-hidden overscroll-x-contain snap-mandatory text-nowrap horizontal-snap"
        #suggestionContainer
      >
        @for (suggestion of suggestions; track suggestion.id) {
        <div class="snap-start cursor-pointer">
          <p-chip [label]="suggestion.text" />
        </div>
        }
      </div>
      @if(showAngelRight()) {
      <div class="rounded-lg">
        <span class="pi pi-angle-right text-red-700 cursor-pointer" (click)="moveToRight()"></span>
      </div>
      }
    </div>
  </div>

  <div [ngClass]="minimized() ? 'hidden' : 'md:h-[50px] flex justify-between pt-2 pr-2 pb-0 pl-2'">
    <div>
      <input type="text" pInputText [(ngModel)]="value" />
    </div>
    <div class="cursor-pointer bg-red-600 w-[50px] justify-center items-center flex rounded-tl-3xl">
      <span class="pi pi-send" style="color: white; cursor: pointer"></span>
    </div>
  </div>
</div>

@if(showOptionsMenu()) {
<div class="options-menu" [class.is-open]="showOptionsMenu()">
  <ul>
    @for(option of optionsMenuItems; track option.icon) {
    <li class="options-menu__item" (click)="closeOptions()">
      <div style="display: flex; gap: 10px">
        <span class="{{ option.icon }}"></span>{{ option.label }}
      </div>
    </li>
    }
  </ul>
</div>

}

@if(toggleChat()) {
<div class="rounded-full bg-white w-[150px] flex items-center gap-2" style="position: fixed; bottom: 20px; right: 20px"
  (click)="minimize()">
  <p-avatar image="./avatar.png" class="mr-2" size="large" shape="circle" />
  <p-overlaybadge severity="success"><span class="text-sm">En linea</span> </p-overlaybadge>
</div>
} @else {
<div [ngClass]="
    toggleChat() ? '' : 'flex flex-col h-screen w-screen bg-white md:h-[520px] md:w-[350px] '
  ">
  <div class="flex items-center justify-between h-[50px] bg-red-700 p-2">
    <div class="flex items-center gap-2">
      @if(toggleChat()) {
      <span class="pi pi-chevron-up text-white cursor-pointer" (click)="minimize()"></span>
      } @else {
      <span class="pi pi-chevron-down text-white cursor-pointer" (click)="minimize()"></span>
      }
      <div class="flex items-center gap-2">
        <p-avatar image="./avatar.png" class="mr-2" size="large" shape="circle" />
        <p-overlaybadge severity="success"> </p-overlaybadge>
        <div class="text-white">{{ bootName }}</div>
      </div>
    </div>
    @if(!toggleChat()) {
    <span class="pi pi-bars text-white cursor-pointer" (click)="showOptions()"></span>
    }
  </div>

  <div #scrollContainer [ngClass]="
      toggleChat()
        ? 'hidden'
        : 'flex flex-1 flex-col gap-2 md:h-[300px] overflow-auto p-2 border border-red-50'
    ">
    @for(message of messages; track message.text) {
    <div class="bg-red-100 rounded-bl-3xl rounded-tr-3xl p-5 max-w-[250px]"
      [class.user-message]="message.from === 'user'">
      {{ message.text }}
    </div>
    }
  </div>

  <div [ngClass]="
      toggleChat()
        ? 'hidden'
        : 'md:h-[115px] overflow-hidden flex flex-col gap-2 p-2 border border-red-100'
    ">
    <span>Estas son algunas de las cosas que me puedes preguntar:</span>
    <div class="flex items-center gap-2">
      @if(showAngelLeft()) {
      <div class="chat-suggestions__scroll-icon">
        <span class="pi pi-angle-left text-red-700 cursor-pointer" (click)="moveToLeft()"></span>
      </div>
      }

      <div
        class="flex gap-2 md:w-[320px] overflow-hidden overscroll-x-contain snap-mandatory text-nowrap horizontal-snap"
        #suggestionContainer>
        @let suggestions = suggestionsList.value()!;
        @for (suggestion of suggestions; track suggestion.id) {
        <div class="snap-start cursor-pointer">
          <p-button [label]="suggestion.text" [rounded]="true" severity="warn" (onClick)="send(suggestion)" />
        </div>
        }
      </div>
      @if(showAngelRight()) {
      <div class="rounded-lg">
        <span class="pi pi-angle-right text-red-700 cursor-pointer" (click)="moveToRight()"></span>
      </div>
      }
    </div>
  </div>

  <form (submit)="send(); $event.preventDefault()">
    <div [ngClass]="toggleChat() ? 'hidden' : 'md:h-[50px] flex justify-between p-2'">
      <input type="text" pInputText [(ngModel)]="message" pSize="small" fluid [ngModelOptions]="{standalone: true}" />
      <div class="cursor-pointer bg-red-600 w-[50px] justify-center items-center flex rounded-tl-3xl">
        <span class="pi pi-send" style="color: white; cursor: pointer" (click)="send()"></span>
      </div>
    </div>
  </form>
</div>
}

@if(showOptionsMenu()) {
<div class="options-menu" [class.is-open]="showOptionsMenu()">
  <ul>
    @for(option of optionsMenuItems.value(); track option.icon) {
    <li class="options-menu__item" (click)="closeOptions()">
      <div style="display: flex; gap: 10px">
        <span class="{{ option.icon }}"></span>{{ option.label }}
      </div>
    </li>
    }
  </ul>
</div>

}